'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ClubView = undefined;

var _taggedTemplateLiteral2 = require('babel-runtime/helpers/taggedTemplateLiteral');

var _taggedTemplateLiteral3 = _interopRequireDefault(_taggedTemplateLiteral2);

var _templateObject = (0, _taggedTemplateLiteral3.default)(['\n  query club($slug: String!) {\n    club(slug: $slug) {\n      _id\n      name\n      images{\n        thumb\n        background\n        square\n      }\n      slug\n      settings{\n        privacy\n      }\n    }\n  }\n'], ['\n  query club($slug: String!) {\n    club(slug: $slug) {\n      _id\n      name\n      images{\n        thumb\n        background\n        square\n      }\n      slug\n      settings{\n        privacy\n      }\n    }\n  }\n']);

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactApollo = require('react-apollo');

var _graphqlTag = require('graphql-tag');

var _graphqlTag2 = _interopRequireDefault(_graphqlTag);

var _reactBootstrap = require('react-bootstrap');

var _HorizontalMenuBar = require('components/HorizontalMenuBar');

var _ObjectPage = require('components/Pages/ObjectPage');

require('./ClubView.scss');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var ClubView = function ClubView(_ref) {
  var data = _ref.data,
      params = _ref.params,
      location = _ref.location,
      children = _ref.children;

  var collapseHeader = location.pathname.includes('/feed') === false;
  var club = data.club,
      loading = data.loading;


  console.log(data);

  if (loading) {
    return _react2.default.createElement(
      'div',
      null,
      'Loading...'
    );
  }

  if (!club) {
    return _react2.default.createElement(
      'div',
      null,
      'Club not found'
    );
  }

  return _react2.default.createElement(
    'section',
    null,
    _react2.default.createElement(_ObjectPage.ObjectPageHeader, {
      name: club.name,
      location: club.location,
      images: club.images,
      collapsed: collapseHeader
    }),
    _react2.default.createElement(
      _HorizontalMenuBar.MenuBar,
      { routePrefix: '/' + params.club_id, route: location },
      _react2.default.createElement(_HorizontalMenuBar.MenuBarItem, { label: 'Feed', to: '/feed' }),
      _react2.default.createElement(_HorizontalMenuBar.MenuBarItem, { label: 'Events', to: '/events' }),
      _react2.default.createElement(_HorizontalMenuBar.MenuBarItem, { label: 'About', to: '/about' }),
      _react2.default.createElement(_HorizontalMenuBar.MenuBarItem, { label: 'Community', to: '/community' }),
      _react2.default.createElement(_HorizontalMenuBar.MenuBarItem, { label: 'My Membership', to: '/membership' }),
      _react2.default.createElement(_HorizontalMenuBar.MenuBarItem, { divider: true }),
      _react2.default.createElement(_HorizontalMenuBar.MenuBarItem, { label: 'Club Profile', to: '/admin/profile' }),
      _react2.default.createElement(_HorizontalMenuBar.MenuBarItem, { label: 'Members', to: '/admin/members' }),
      _react2.default.createElement(_HorizontalMenuBar.MenuBarItem, { label: 'Approvals', to: '/admin/approvals' }),
      _react2.default.createElement(_HorizontalMenuBar.MenuBarItem, { label: 'Invoices', to: '/admin/invoices' }),
      _react2.default.createElement(_HorizontalMenuBar.MenuBarItem, { label: 'Finances', to: '/admin/finances' }),
      _react2.default.createElement(_HorizontalMenuBar.MenuBarItem, { label: _react2.default.createElement('i', { className: 'fa fa-gear' }), to: '/admin/settings' }),
      _react2.default.createElement(
        'button',
        { className: 'btn btn-primary menu-btn-inner pull-right ripple pl-xl pr-xl' },
        'Join Club'
      )
    ),
    _react2.default.createElement(
      _reactBootstrap.Grid,
      { fluid: true },
      children
    )
  );
};

ClubView.propTypes = {
  children: _react.PropTypes.oneOfType([_react.PropTypes.array, _react.PropTypes.element]),
  params: _react.PropTypes.object,
  // syncClub: PropTypes.func,
  location: _react.PropTypes.object,
  data: _react.PropTypes.object
};

var clubQuery = (0, _graphqlTag2.default)(_templateObject);

var ClubViewWithApollo = (0, _reactApollo.graphql)(clubQuery, {
  options: function options(_ref2) {
    var params = _ref2.params;
    return { variables: { slug: params.club_id } };
  }
})(ClubView);

exports.default = ClubViewWithApollo;
exports.ClubView = ClubView;