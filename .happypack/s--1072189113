'use strict';

var PATHS = require('../paths');
var ExtractTextPlugin = require('extract-text-webpack-plugin');

module.exports = function () {
  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
      _ref$production = _ref.production,
      production = _ref$production === undefined ? false : _ref$production,
      _ref$browser = _ref.browser,
      browser = _ref$browser === undefined ? false : _ref$browser;

  var CSS_LOADER = production ? 'happypack/loader?id=css-loader' : 'happypack/loader?id=css-loader?sourceMap&-minimize';
  var SASS_LOADER = production ? 'happypack/loader?id=sass-loader' : 'happypack/loader?id=sass-loader?sourceMap';

  return {
    test: /\.scss$/,
    use: ExtractTextPlugin.extract({
      fallback: "happypack/loader?id=style-loader",
      use: ['' + CSS_LOADER, 'happypack/loader?id=postcss-loader', '' + SASS_LOADER]
    }),
    include: [PATHS.src]
  };
};