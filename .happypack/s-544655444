'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactRedux = require('react-redux');

var _reduxForm = require('redux-form');

var _Forms = require('components/Forms');

var _errors = require('utils/form_validation/errors');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var CreateEventForm = function CreateEventForm(_ref) {
  var clubs = _ref.clubs,
      handleSubmit = _ref.handleSubmit,
      createForm = _ref.createForm;


  var slugString = createForm && createForm.values && createForm.values.slug ? createForm.values.slug : '<your id here>';

  return _react2.default.createElement(
    'form',
    { className: 'form-horizontal', onSubmit: handleSubmit },
    _react2.default.createElement(
      _Forms.FieldSet,
      null,
      _react2.default.createElement(_reduxForm.Field, {
        name: 'hosting_club_id',
        label: 'Hosting Club',
        type: 'text',
        help: 'Which club is hosting this event?',
        component: _Forms.Select,
        options: clubs.map(function (c) {
          return { label: c.name, value: c._id };
        })
      })
    ),
    _react2.default.createElement(
      _Forms.FieldSet,
      null,
      _react2.default.createElement(_reduxForm.Field, {
        name: 'event.title',
        label: 'Event Title',
        type: 'text',
        help: 'What is the name of this event?',
        validate: [_errors.required, (0, _errors.maxLength)(128)],
        component: _Forms.Input
      })
    ),
    _react2.default.createElement(
      _Forms.FieldSet,
      null,
      _react2.default.createElement(_reduxForm.Field, {
        name: 'slug',
        label: 'Event Link',
        type: 'text',
        help: 'Enter a unique link for your event to use (http://openclub.co/event/' + slugString + ').',
        validate: [_errors.required, _errors.slug],
        component: _Forms.Input
      })
    ),
    _react2.default.createElement(
      _Forms.FieldSet,
      null,
      _react2.default.createElement(_reduxForm.Field, {
        name: 'event.images.background',
        label: 'Event Image',
        help: 'Select an image to use as the events banner picture.',
        component: _Forms.ImageUpload
      })
    ),
    _react2.default.createElement(
      'button',
      { type: 'submit' },
      'Submit'
    )
  );
};

var CreateEventReduxForm = (0, _reduxForm.reduxForm)({
  form: 'create_event'
})(CreateEventForm);

exports.default = (0, _reactRedux.connect)(function (state) {
  return {
    createForm: state.form.create_event
  };
})(CreateEventReduxForm);